<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
</head>

    <!--CSS Part Start-->
    <style>
        .chess_board {
            width: 500px;
            height: 500px;
            margin: auto;
            background-color: cyan;
            display: flex;
            flex-wrap: wrap;
        }

        .chess_board div {
            width: 12.5%;
            height: 12.5%;
            box-sizing: border-box;
        }

        img {
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }
    </style>
    <!--CSS Part End-->

    <!--JavaScript Part Start-->
    <script defer>
        document.addEventListener("DOMContentLoaded", function() {

            // Classes ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Pawn class start
            class Pawn {
                constructor (pawnPosition, blackUp, color) {
                    this.firstMove = true;
                    this.pawnPosition = pawnPosition;
                    this.blackUp = blackUp;
                    this.color = color;
                }

                
                possibleMove(xAxisValue, yAxisValue) {
                    let possibleMovements = [];

                    if (this.firstMove === true) {
                        this.firstMove = false;

                        if (this.blackUp && this.color === "black") {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)+1}_${yAxisValue}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)+2}_${yAxisValue}`);
                        }

                        if (!this.blackUp && this.color === "black") {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)-1}_${yAxisValue}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)-2}_${yAxisValue}`);
                        }

                        if (this.blackUp && this.color === "white") {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)-1}_${yAxisValue}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)-2}_${yAxisValue}`);
                        }

                        if (!this.blackUp && this.color === "white") {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)+1}_${yAxisValue}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue)+2}_${yAxisValue}`);
                        }    
                    } else {
                        if (this.blackUp && this.color === "black") {
                            if (parseInt(yAxisValue) <= 8) {
                                possibleMovements.push(`.cell_${parseInt(xAxisValue) + 1}_${yAxisValue}`);
                            }
                        }

                        if (!this.blackUp && this.color === "black") {
                            if (parseInt(yAxisValue) >= 1) {
                                possibleMovements.push(`.cell_${parseInt(xAxisValue) - 1}_${yAxisValue}`);
                            }
                        }

                        if (this.blackUp && this.color === "white") {
                            if (parseInt(yAxisValue) <= 8) {
                                possibleMovements.push(`.cell_${parseInt(xAxisValue) - 1}_${yAxisValue}`);
                            }
                        }

                        if (!this.blackUp && this.color === "white") {
                            if (parseInt(yAxisValue) <= 8) {
                                possibleMovements.push(`.cell_${parseInt(xAxisValue) + 1}_${yAxisValue}`);
                            }
                        }
                    }
                    
                    return possibleMovements;
                }

                updatePawnPosition(newCoordinates) {
                    this.pawnPosition = newCoordinates;
                }

                eatingPossibility(xAxisValue, yAxisValue) {
                    let possibleMovements = [];

                    
                    if (this.blackUp && this.color === "black") {
                        if (parseInt(yAxisValue) <= 8) {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) + 1}_${parseInt(yAxisValue) + 1}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) + 1}_${parseInt(yAxisValue) - 1}`);
                        }
                    }

                    if (!this.blackUp && this.color === "black") {
                        if (parseInt(yAxisValue) >= 1) {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) - 1}_${parseInt(yAxisValue) + 1}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) - 1}_${parseInt(yAxisValue) - 1}`);
                        }
                    }

                    if (this.blackUp && this.color === "white") {
                        if (parseInt(yAxisValue) <= 8) {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) - 1}_${parseInt(yAxisValue) + 1}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) - 1}_${parseInt(yAxisValue) - 1}`);
                        }
                    }

                    if (!this.blackUp && this.color === "white") {
                        if (parseInt(yAxisValue) <= 8) {
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) + 1}_${parseInt(yAxisValue) + 1}`);
                            possibleMovements.push(`.cell_${parseInt(xAxisValue) + 1}_${parseInt(yAxisValue) - 1}`);
                        }
                    }

                    return possibleMovements;
                }


            }
            // Pawn class end

            // Rook class start
            class Rook{
                constructor (rookPosition, blackUp, color) {
                    this.rookPosition = rookPosition;
                    this.blackUp = blackUp;
                    this.color = color;
                }

                possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue) {
                    let possibleMovements = [];

                    if(newxAxisValue == xAxisValue) {
                        if (yAxisValue < newyAxisValue) {
                            for(let i = yAxisValue; i < newyAxisValue; i++){
                                let blockingPiece = document.querySelector(`.cell_${newxAxisValue}_${parseInt(i) + 1}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${newxAxisValue}_${parseInt(i) + 1}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }

                        if (yAxisValue > newyAxisValue) {
                            for(let i = yAxisValue; i > newyAxisValue; i--){
                                let blockingPiece = document.querySelector(`.cell_${newxAxisValue}_${parseInt(i) - 1}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${newxAxisValue}_${parseInt(i) - 1}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }
                    } // end of if newxAxisValue == xAxisValue statement


                    if(newyAxisValue == yAxisValue) {
                        if (xAxisValue < newxAxisValue) {
                            for(let i = xAxisValue; i < newxAxisValue; i++){
                                let blockingPiece = document.querySelector(`.cell_${parseInt(i) + 1}_${newyAxisValue}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${parseInt(i) + 1}_${newyAxisValue}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }

                        if (xAxisValue > newxAxisValue) {
                            for(let i = xAxisValue; i > newxAxisValue; i--){
                                let blockingPiece = document.querySelector(`.cell_${parseInt(i) - 1}_${newyAxisValue}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${parseInt(i) - 1}_${newyAxisValue}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }
                    } // end of if newxAxisValue == xAxisValue statement
                
                    return possibleMovements;   
                }

                updateRookPosition(newCoordinates) {
                    this.rookPosition = newCoordinates;
                }

                // eating possibilities
                eatingPossibility(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue) {
                    let possibleMovements = [];
                    let recNumber = 0;

                    if(newxAxisValue == xAxisValue) {
                        if (yAxisValue < newyAxisValue) {
                            let yAxisValuePlusOne = parseInt(yAxisValue)+1;
                            recNumber = yAxisValuePlusOne;

                            for(let i = yAxisValuePlusOne; i < newyAxisValue; i++){
                                let blockingPiece = document.querySelector(`.cell_${newxAxisValue}_${i}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${newxAxisValue}_${i}`);
                                } else {
                                    break;
                                }
                                recNumber++;
                            } // end of for each statement

                            if (recNumber == newyAxisValue) {
                                possibleMovements.push(`.cell_${newxAxisValue}_${recNumber}`);
                            }
                            
                        }

                        if (yAxisValue > newyAxisValue) {
                            let yAxisValueMinusOne = parseInt(yAxisValue)-1;
                            recNumber = yAxisValueMinusOne; 
                            for(let i = yAxisValueMinusOne; i > newyAxisValue; i--){
                                let blockingPiece = document.querySelector(`.cell_${newxAxisValue}_${i}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${newxAxisValue}_${i}`);
                                } else {
                                    break;
                                }
                                recNumber--;
                            } // end of for each statement

                            if (recNumber == newyAxisValue) {
                                possibleMovements.push(`.cell_${newxAxisValue}_${recNumber}`);
                            }
                        }
                    } // end of if newxAxisValue == xAxisValue statement


                    if(newyAxisValue == yAxisValue) {
                        if (xAxisValue < newxAxisValue) {
                            let xAxisValuePlusOne = parseInt(xAxisValue)+1;
                            recNumber = xAxisValuePlusOne;

                            for(let i = xAxisValuePlusOne; i < newxAxisValue; i++){
                                let blockingPiece = document.querySelector(`.cell_${i}_${newyAxisValue}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${i}_${newyAxisValue}`);
                                } else {
                                    break;
                                }
                                recNumber++;
                            } // end of for each statement

                            if (recNumber == newxAxisValue) {
                                possibleMovements.push(`.cell_${recNumber}_${newyAxisValue}`);
                            }
                        }

                        if (xAxisValue > newxAxisValue) {
                            let xAxisValueMinusOne = parseInt(xAxisValue)-1;
                            recNumber = xAxisValueMinusOne;

                            for(let i = xAxisValueMinusOne; i > newxAxisValue; i--){
                                let blockingPiece = document.querySelector(`.cell_${i}_${newyAxisValue}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${i}_${newyAxisValue}`);
                                } else {
                                    break;
                                }
                                recNumber--;
                            } // end of for each statement

                            if (recNumber == newxAxisValue) {
                                possibleMovements.push(`.cell_${recNumber}_${newyAxisValue}`);
                            }
                        }
                    } // end of if newxAxisValue == xAxisValue statement

                    return possibleMovements;

                }

            }
            // Rook class end

            // Bishop class start
            class Bishop {
                constructor (bishopPosition, blackUp, color) {
                    this.bishopPosition = bishopPosition;
                    this.blackUp = blackUp;
                    this.color = color;
                }

                possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue) {
                    let possibleMovements = [];
                    let diff_x_value = newxAxisValue - xAxisValue;
                    let diff_y_value = newyAxisValue - yAxisValue;
                    let abs_diff_x_value = Math.abs(diff_x_value);
                    let abs_diff_y_value = Math.abs(diff_y_value);

                    // absolute value has to be same for x value and y value
                    if(abs_diff_x_value == abs_diff_y_value) {
                        // down diagonally(down right)
                        if (diff_x_value > 0 && diff_y_value > 0) {
                            for(let i = 1; i <= abs_diff_x_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + i}_${yAxisValue + i}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + i}_${yAxisValue + i}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }

                        // down diagonally(down left)
                        if (diff_x_value > 0 && diff_y_value < 0) {
                            for(let i = 1; i <= abs_diff_y_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + i}_${yAxisValue + (i * -1)}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + i}_${yAxisValue + (i * -1)}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }

                        // up diagonally(up right)
                        if (diff_x_value < 0 && diff_y_value > 0) {
                            for(let i = 1; i <= abs_diff_y_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + i}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + i}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }

                        // up diagonally(up left)
                        if (diff_x_value < 0 && diff_y_value < 0) {
                            for(let i = 1; i <= abs_diff_y_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + (i * -1)}`);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + (i * -1)}`);
                                } else {
                                    break;
                                }
                            } // end of for each statement
                        }

                    } // end of if newxAxisValue == xAxisValue statement
                
                    return possibleMovements;   
                }

                updateBishopPosition(newCoordinates) {
                    this.bishopPosition = newCoordinates;
                }

                // eating possibilities
                eatingPossibility(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue) {
                    let possibleMovements = [];
                    let diff_x_value = newxAxisValue - xAxisValue;
                    let diff_y_value = newyAxisValue - yAxisValue;
                    let abs_diff_x_value = Math.abs(diff_x_value);
                    let abs_diff_y_value = Math.abs(diff_y_value);
                    let row_recNumber = 0;
                    let col_recNumber = 0;


                    if(abs_diff_x_value == abs_diff_y_value) {
                        // down diagonally(down right)
                        if (diff_x_value > 0 && diff_y_value > 0) {
                            for(let i = 1; i <= abs_diff_x_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + i}_${yAxisValue + i}`);
                                row_recNumber = xAxisValue + i;
                                col_recNumber = yAxisValue + i;

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + i}_${yAxisValue + i}`);
                                } else {
                                    break;
                                }
                                
                            } // end of for each statement
                        }

                        // down diagonally(down left)
                        if (diff_x_value > 0 && diff_y_value < 0) {
                            for(let i = 1; i <= abs_diff_y_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + i}_${yAxisValue + (i * -1)}`);
                                row_recNumber = xAxisValue + i;
                                col_recNumber = yAxisValue + (i * -1);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + i}_${yAxisValue + (i * -1)}`);
                                    
                                } else {
                                    break;
                                }
                                
                            } // end of for each statement
                        }

                        // up diagonally(up right)
                        if (diff_x_value < 0 && diff_y_value > 0) {
                            for(let i = 1; i <= abs_diff_y_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + i}`);
                                row_recNumber = xAxisValue + (i * -1);
                                col_recNumber = yAxisValue + i;

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + i}`);
                                    
                                } else {
                                    break;
                                }
                                
                            } // end of for each statement
                        }

                        // up diagonally(up left)
                        if (diff_x_value < 0 && diff_y_value < 0) {
                            for(let i = 1; i <= abs_diff_y_value; i++){
                                let blockingPiece = document.querySelector(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + (i * -1)}`);
                                row_recNumber = xAxisValue + (i * -1);
                                col_recNumber = yAxisValue + (i * -1);

                                // if blockingPiece is none then add
                                if (blockingPiece.innerHTML === ""){
                                    possibleMovements.push(`.cell_${xAxisValue + (i * -1)}_${yAxisValue + (i * -1)}`);
                                    
                                } else {
                                    break;
                                }
                                
                            } // end of for each statement
                        }
                        if (row_recNumber == newxAxisValue && col_recNumber == newyAxisValue) {
                                possibleMovements.push(`.cell_${row_recNumber}_${col_recNumber}`);
                        }

                    }

                    return possibleMovements;

                }

            }
            // Bishop class end

            // Knight class start
            class Knight {
                constructor (knightPosition, blackUp, color) {
                    this.knightPosition = knightPosition;
                    this.blackUp = blackUp;
                    this.color = color;
                }

                possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue) {
                    let possibleMovements = [];
                    let diff_x_value = newxAxisValue - xAxisValue;
                    let diff_y_value = newyAxisValue - yAxisValue;
                    let abs_diff_x_value = Math.abs(diff_x_value);
                    let abs_diff_y_value = Math.abs(diff_y_value);
                    let abs_total_val = abs_diff_x_value + abs_diff_y_value;
                    let row_recNumber = 0;
                    let col_recNumber = 0;


                    if((abs_total_val == 3 && abs_diff_x_value !== 0) ||(abs_total_val == 3 && abs_diff_y_value !== 0)) {
                        // 2 down right and left
                        if (abs_diff_x_value == 2) {
                            possibleMovements.push(`.cell_${xAxisValue+2}_${yAxisValue+1}`);
                            possibleMovements.push(`.cell_${xAxisValue+2}_${yAxisValue-1}`);
                            possibleMovements.push(`.cell_${xAxisValue-2}_${yAxisValue+1}`);
                            possibleMovements.push(`.cell_${xAxisValue-2}_${yAxisValue-1}`);
                        } else if (abs_diff_x_value == 1) {
                            possibleMovements.push(`.cell_${xAxisValue+1}_${yAxisValue+2}`);
                            possibleMovements.push(`.cell_${xAxisValue+1}_${yAxisValue-2}`);
                            possibleMovements.push(`.cell_${xAxisValue-1}_${yAxisValue+2}`);
                            possibleMovements.push(`.cell_${xAxisValue-1}_${yAxisValue-2}`);
                        }
                    }

                    return possibleMovements;
                }

                updateKnightPosition(newCoordinates) {
                    this.knightPosition = newCoordinates;
                }

                
            }
            // Knight class end

            // Classes ////////////////////////////////////////////////////////////////////////////////////////////////////////////////


            // possible moves calculate start
            function possibleMove(piece, coordinates, newCoordinates) {
                let foundIdx = 0;
                let xAxisValue = parseInt(coordinates.substr(6, 1));
                let yAxisValue = parseInt(coordinates.substr(coordinates.length -1, 1));
                let newxAxisValue = parseInt(newCoordinates.substr(6, 1));
                let newyAxisValue = parseInt(newCoordinates.substr(coordinates.length -1, 1));

                let possibleMoves = [];
                let pieceName = "";


                // pieces movement
                if (piece.getAttribute('alt').includes("whitePawn")) {
                    foundIdx = whitePawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "whitePawn";
                } else if (piece.getAttribute('alt').includes("blackPawn")) {
                    foundIdx = blackPawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "blackPawn";
                } else if (piece.getAttribute('alt').includes("blackRook")) {
                    foundIdx = blackRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "blackRook";
                } else if (piece.getAttribute('alt').includes("whiteRook")) {
                    foundIdx = whiteRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "whiteRook";
                } else if (piece.getAttribute('alt').includes("whiteBishop")) {
                    foundIdx = whiteBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "whiteBishop";
                } else if (piece.getAttribute('alt').includes("blackBishop")) {
                    foundIdx = blackBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "blackBishop";
                } else if (piece.getAttribute('alt').includes("blackKnight")) {
                    foundIdx = blackKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "blackKnight";
                } else if (piece.getAttribute('alt').includes("whiteKnight")) {
                    foundIdx = whiteKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === `.cell_${xAxisValue}_${yAxisValue}`});
                    pieceName = "whiteKnight";
                }


                
                if (foundIdx !== -1) {
                    switch (pieceName){
                        case "whitePawn":
                            possibleMoves = whitePawnPieces[foundIdx].possibleMove(xAxisValue, yAxisValue);
                            break;
                        case "blackPawn":
                            possibleMoves = blackPawnPieces[foundIdx].possibleMove(xAxisValue, yAxisValue);
                            break;
                        case "blackRook":
                            possibleMoves = blackRookPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue);
                            break;
                        case "whiteRook":
                            possibleMoves = whiteRookPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue);
                            break;
                        case "blackBishop":
                            possibleMoves = blackBishopPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue);
                            break;
                        case "whiteBishop":
                            possibleMoves = whiteBishopPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue);
                            break;
                        case "blackKnight":
                            possibleMoves = blackKnightPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue);
                            break;
                        case "whiteKnight":
                            possibleMoves = whiteKnightPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, newxAxisValue, newyAxisValue);
                            break;
                    }
                    
                }

                return possibleMoves;

            }
            // possible moves calculate end

            // possible eating move start
            function eatingPossibility(piece, coordinates, newCoordinates) {
                let foundIdx = 0;
                let xAxisValue = parseInt(coordinates.substr(6, 1));
                let yAxisValue = parseInt(coordinates.substr(coordinates.length -1, 1));
                let new_xAxisValue = parseInt(newCoordinates.substr(6, 1));
                let new_yAxisValue = parseInt(newCoordinates.substr(coordinates.length -1, 1));
                let currentPosition = `.cell_${xAxisValue}_${yAxisValue}`;
                let newEatingPosition = `.cell_${new_xAxisValue}_${new_yAxisValue}`;

                let possibleMoves = [];
                let pieceName = "";

                

                // find index of piece
                if (piece.getAttribute('alt').includes("whitePawn")) {
                    foundIdx = whitePawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === currentPosition});
                    pieceName = "whitePawn";
                } else if (piece.getAttribute('alt').includes("blackPawn")) {
                    foundIdx = blackPawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === currentPosition});
                    pieceName = "blackPawn";
                } else if (piece.getAttribute('alt').includes("blackRook")) {
                    foundIdx = blackRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === currentPosition});
                    pieceName = "blackRook";
                } else if (piece.getAttribute('alt').includes("whiteRook")) {
                    foundIdx = whiteRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === currentPosition});
                    pieceName = "whiteRook";
                } else if (piece.getAttribute('alt').includes("blackBishop")) {
                    foundIdx = blackBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === currentPosition});
                    pieceName = "blackBishop";
                } else if (piece.getAttribute('alt').includes("whiteBishop")) {
                    foundIdx = whiteBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === currentPosition});
                    pieceName = "whiteBishop";
                } else if (piece.getAttribute('alt').includes("blackKnight")) {
                    foundIdx = blackKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === currentPosition});
                    pieceName = "blackKnight";
                } else if (piece.getAttribute('alt').includes("whiteKnight")) {
                    foundIdx = whiteKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === currentPosition});
                    pieceName = "whiteKnight";
                }
                
                if (foundIdx !== -1) {
                    switch (pieceName){
                        case "whitePawn":
                            possibleMoves = whitePawnPieces[foundIdx].eatingPossibility(xAxisValue, yAxisValue);
                            break;
                        case "blackPawn":
                            possibleMoves = blackPawnPieces[foundIdx].eatingPossibility(xAxisValue, yAxisValue);
                            break;
                        case "whiteRook":
                            possibleMoves = whiteRookPieces[foundIdx].eatingPossibility(xAxisValue, yAxisValue, new_xAxisValue, new_yAxisValue);
                            break;
                        case "blackRook":
                            possibleMoves = blackRookPieces[foundIdx].eatingPossibility(xAxisValue, yAxisValue, new_xAxisValue, new_yAxisValue);
                            break;
                        case "blackBishop":
                            possibleMoves = blackBishopPieces[foundIdx].eatingPossibility(xAxisValue, yAxisValue, new_xAxisValue, new_yAxisValue);
                            break;
                        case "whiteBishop":
                            possibleMoves = whiteBishopPieces[foundIdx].eatingPossibility(xAxisValue, yAxisValue, new_xAxisValue, new_yAxisValue);
                            break;
                        case "blackKnight":
                            possibleMoves = blackKnightPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, new_xAxisValue, new_yAxisValue);
                            break;
                        case "whiteKnight":
                            possibleMoves = whiteKnightPieces[foundIdx].possibleMove(xAxisValue, yAxisValue, new_xAxisValue, new_yAxisValue);
                            break;
                    }
                    
                }
                
                return possibleMoves;

            
            }

            // possible eating move end


            // updating pieces start
            function updateCoordinate(piece, prevCoordinate, coordinates, eaten, eatenPiece) {
                let foundIdx = 0;
                let prev_xAxisValue = prevCoordinate.substr(6, 1);
                let prev_yAxisValue = prevCoordinate.substr(coordinates.length -1, 1);
                let new_xAxisValue = coordinates.substr(6, 1);
                let new_yAxisValue = coordinates.substr(coordinates.length -1, 1);
                let possibleMoves = [];
                let pieceName = "";
                
                // getting previous movement
                if (piece.getAttribute('alt').includes("whitePawn")) {
                    foundIdx = whitePawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "whitePawn";
                } else if (piece.getAttribute('alt').includes("blackPawn")) {
                    foundIdx = blackPawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "blackPawn";
                } else if (piece.getAttribute('alt').includes("blackRook")) {
                    foundIdx = blackRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "blackRook";
                } else if (piece.getAttribute('alt').includes("whiteRook")) {
                    foundIdx = whiteRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "whiteRook";
                } else if (piece.getAttribute('alt').includes("blackBishop")) {
                    foundIdx = blackBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "blackBishop";
                } else if (piece.getAttribute('alt').includes("whiteBishop")) {
                    foundIdx = whiteBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "whiteBishop";
                } else if (piece.getAttribute('alt').includes("blackKnight")) {
                    foundIdx = blackKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "blackKnight";
                } else if (piece.getAttribute('alt').includes("whiteKnight")) {
                    foundIdx = whiteKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === `.cell_${prev_xAxisValue}_${prev_yAxisValue}`});
                    pieceName = "whiteKnight";
                }
            


                if (foundIdx !== -1) {
                    switch (pieceName){
                        case "whitePawn":
                            whitePawnPieces[foundIdx].updatePawnPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;
                        case "blackPawn":
                            blackPawnPieces[foundIdx].updatePawnPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;
                        case "blackRook":
                            blackRookPieces[foundIdx].updateRookPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;
                        case "whiteRook":
                            whiteRookPieces[foundIdx].updateRookPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;
                        case "whiteBishop":
                            whiteBishopPieces[foundIdx].updateBishopPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;
                        case "blackBishop":
                            blackBishopPieces[foundIdx].updateBishopPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;
                        case "blackKnight":
                            blackKnightPieces[foundIdx].updateKnightPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;
                        case "whiteKnight":
                            whiteKnightPieces[foundIdx].updateKnightPosition(`.cell_${new_xAxisValue}_${new_yAxisValue}`);
                            break;             
                    } // end of switch case
                } // end of if foundIdx !== 0

                // Decrease pieces if some piece is eaten
                if (eaten) {
                    if (eatenPiece.getAttribute('alt').includes("whitePawn")) {
                        foundIdx = whitePawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        whitePawnPieces.splice(foundIdx, 1);
                    } else if (eatenPiece.getAttribute('alt').includes("blackPawn")) {
                        foundIdx = blackPawnPieces.findIndex(function(cellNumber){return cellNumber.pawnPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        blackPawnPieces.splice(foundIdx, 1);
                    } else if (eatenPiece.getAttribute('alt').includes("blackRook")) {
                        foundIdx = blackRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        blackRookPieces.splice(foundIdx, 1);
                    } else if (eatenPiece.getAttribute('alt').includes("whiteRook")) {
                        foundIdx = whiteRookPieces.findIndex(function(cellNumber){return cellNumber.rookPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        whiteRookPieces.splice(foundIdx, 1);
                    } else if (eatenPiece.getAttribute('alt').includes("whiteBishop")) {
                        foundIdx = whiteBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        whiteBishopPieces.splice(foundIdx, 1);
                    } else if (eatenPiece.getAttribute('alt').includes("blackBishop")) {
                        foundIdx = blackBishopPieces.findIndex(function(cellNumber){return cellNumber.bishopPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        blackBishopPieces.splice(foundIdx, 1);
                    } else if (eatenPiece.getAttribute('alt').includes("blackKnight")) {
                        foundIdx = blackKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        blackKnightPieces.splice(foundIdx, 1);
                    } else if (eatenPiece.getAttribute('alt').includes("whiteKnight")) {
                        foundIdx = whiteKnightPieces.findIndex(function(cellNumber){return cellNumber.knightPosition === `.cell_${new_xAxisValue}_${new_yAxisValue}`});
                        whiteKnightPieces.splice(foundIdx, 1);
                    }

                }

            }
            // updating pieces end


            // Variables Start
            const chess_board = document.querySelector(".chess_board");
            let boxes = 8;
            const chess_pieces = ["Rook", "Knight", "Bishop", "Queen", "King", "Bishop", "Knight", "Rook"];
            let tempNum = 1;
            let selectedPiece = null;
            let prevCoordinate = null;

            // white pieces
            let whitePawnPieces = [];
            let whiteRookPieces = [];
            let whiteKnightPieces = [];
            let whiteBishopPieces = [];
            let whiteQueenPiece = [];
            let whiteKingPiece = [];

            // black pieces
            let blackPawnPieces = [];
            let blackRookPieces = [];
            let blackKnightPieces = [];
            let blackBishopPieces = [];
            let blackQueenPiece = [];
            let blackKingPiece = [];

            let possibleMoves = [];
            let foundIdx = 0;
            let turn = "";
            let blackUp = false;
            let whiteRowNum = 0;
            let blackRowNum = 0;
            let whiteUp = true;
            // Variables End

            if (confirm("First Turn: White piece goes first?")) {
                turn = "white";
            } else {
                turn = "black";
            }

            
            if (confirm("Do you want black pieces to be in the upperp position?")) {
                blackUp = true;
            } else {
                blackUp = false;
            }

            for(let rowNum = 1; rowNum <= boxes; rowNum++){
                // start of row outer for loop

                // start of inner for loop
                for(let colNum = 1; colNum <= boxes; colNum++){
                    let newCell = document.createElement("div");
                

                    // Different colors
                    if ((rowNum +colNum) % 2 === 0) {
                        newCell.style.backgroundColor = "rgb(99, 70, 49)";
                        
                    } else {
                        newCell.style.backgroundColor = "antiquewhite";
                        
                    }
                    newCell.className = `cell_${rowNum}_${colNum}`;

                    // when clicked it shows where piece can move
                    newCell.setAttribute("onclick", `clicked(".cell_${rowNum}_${colNum}")`);

                    chess_board.appendChild(newCell);
                }// end of inner for loop
            
            } // end of row outer for loop

            // White and Black Pawn position(For the Pawn)
            if (blackUp) {
                blackRowNum = 2;
                whiteRowNum = 7;  
            } else {
                blackRowNum = 7;
                whiteRowNum = 2;
            }

            for(let i = 1; i <= 8; i++){
                const whitePawnPosition = document.querySelector(`.cell_${whiteRowNum}_${i}`);
                whitePawnPosition.innerHTML = `<img src="./img/whitePawn.png" alt="whitePawn">`
                var whitePawn = new Pawn(`.cell_${whiteRowNum}_${i}`, blackUp, "white");
                whitePawnPieces.push(whitePawn);

                const blackPawnPosition = document.querySelector(`.cell_${blackRowNum}_${i}`);
                blackPawnPosition.innerHTML = `<img src="./img/blackPawn.png" alt="blackPawn">`
                var blackPawn = new Pawn(`.cell_${blackRowNum}_${i}`, blackUp, "black");
                blackPawnPieces.push(blackPawn);
            }

            // White and Black Pawn position(For the Other)
            if (blackUp) {
                blackRowNum = 1;
                whiteRowNum = 8;
            } else {
                blackRowNum = 8;
                whiteRowNum = 1;
            }

            // White and Black Rook Position
            chess_pieces.forEach((piece) => {
                // White Pieces
                const whitePosition = document.querySelector(`.cell_${whiteRowNum}_${tempNum}`);
                whitePosition.innerHTML = `<img src="./img/white${piece}.png" alt="white${piece}">`;
                switch (piece) {
                    case "Rook":
                        var whiteRook = new Rook(`.cell_${whiteRowNum}_${tempNum}`, blackUp, "white");
                        whiteRookPieces.push(whiteRook);
                        break;
                    case "Bishop":
                        var whiteBishop = new Bishop(`.cell_${whiteRowNum}_${tempNum}`, blackUp, "white");
                        whiteBishopPieces.push(whiteBishop);
                        break;
                    case "Knight":
                        var whiteKnight = new Knight(`.cell_${whiteRowNum}_${tempNum}`, blackUp, "white");
                        whiteKnightPieces.push(whiteKnight);
                        break;
                    // Something to add on
                }

                // Black Pieces
                const blackPosition = document.querySelector(`.cell_${blackRowNum}_${tempNum}`);
                blackPosition.innerHTML = `<img src="./img/black${piece}.png" alt="black${piece}">`;
                switch (piece) {
                    case "Rook":
                        var blackRook = new Rook(`.cell_${blackRowNum}_${tempNum}`, blackUp, "black");
                        blackRookPieces.push(blackRook);
                        break;
                    case "Bishop":
                        var blackBishop = new Bishop(`.cell_${blackRowNum}_${tempNum}`, blackUp, "black");
                        blackBishopPieces.push(blackBishop);
                        break;
                    case "Knight":
                        var blackKnight = new Knight(`.cell_${blackRowNum}_${tempNum}`, blackUp, "black");
                        blackKnightPieces.push(blackKnight);
                        break;
                 // Something to add on   
                }

                tempNum++;
            });

            tempNum = 0;

            

            window.clicked = function(coordinateValue) {
                // selecting a coordinate
                const coordinate = document.querySelector(`${coordinateValue}`);

                // if the piece is selected
                if(selectedPiece) {
                    // if the movement place is empty
                    if (coordinate.innerHTML === "") {     
                        possibleMoves = possibleMove(selectedPiece, prevCoordinate, `${coordinateValue}`);

                        if (possibleMoves.length > 0) {
                            possibleMoves.some((possibleMovement) => {
                                // if it matches with coordinate movement
                                if(possibleMovement === `${coordinateValue}`) {
                                    coordinate.appendChild(selectedPiece);
                                    updateCoordinate(selectedPiece, prevCoordinate, `${coordinateValue}`, false);

                                    switch (turn) {
                                        case "white":
                                            turn = "black";
                                            break;
                                        case "black":
                                            turn = "white";
                                            break;
                                    } // end of switch case statement
                                    return true;
                                } else {// end of if it matches possible movements
                                    return false;
                                }
                            }); // possible moves for each statement
                        }

                        selectedPiece = null;
                        
                    // if there is an enemy or other piece
                    } else {
                        let otherPiece = coordinate.querySelector("img");
                        let eatingPossibilities = [];
                        if (otherPiece.getAttribute('alt').includes("white") && turn === "black" || otherPiece.getAttribute('alt').includes("black") && turn === "white"){
                            eatingPossibilities = eatingPossibility(selectedPiece, prevCoordinate, `${coordinateValue}`);

                            if (eatingPossibilities.length > 0) {
                                eatingPossibilities.some((eatingpossibleMovement) => {

                                    // if it matches with coordinate movement
                                    if(eatingpossibleMovement === `${coordinateValue}`) {
                                        eatenPiece = coordinate.innerHTML;
                                        coordinate.innerHTML = "";
                                        coordinate.appendChild(selectedPiece);
                                        updateCoordinate(selectedPiece, prevCoordinate, `${coordinateValue}`, true, otherPiece);

                                        switch (turn) {
                                            case "white":
                                                turn = "black";
                                                break;
                                            case "black":
                                                turn = "white";
                                                break;
                                        } // end of switch case statement
                                        selectedPiece = null;
                                        return true;

                                    } else {// end of if it matches possible movements
                                        return false;
                                    }
                                }); // possible moves for each statement
                            }
                        } // if you are trying to eat something end
                        // need something to add
                        
                        
                        
                    }
                } else {
                    if(coordinate.querySelector("img")){
                        // if it is not selectedPiece, then selection 
                        selectedPiece = coordinate.querySelector("img");
                        if(!selectedPiece.getAttribute('alt').includes(turn)) {
                            selectedPiece = null;
                        } else {
                            prevCoordinate = `${coordinateValue}`;
                        }
                        
                    } // inner if image if statement
                } // outer else statement
            }
        });
        
    </script>
    <!--JavaScript Part End-->
<body>
    <div class="chess_board">

    </div>
</body>
</html>